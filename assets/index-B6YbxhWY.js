var Qe=Object.defineProperty;var et=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(et(t,typeof e!="symbol"?e+"":e,n),n);import{d as ee,bx as O,r as B,aO as z,a1 as le,a9 as c,by as _,a2 as D,bg as o,az as j,F as We,$ as V,c as M,b8 as Fe,aX as tt,aR as nt,aP as at,M as ne,_ as rt}from"./@vue-C6c05riL.js";import{L as Q,B as ot,D as it}from"./vue-chartjs-NfUR0-Eb.js";import{p as Me}from"./chartjs-plugin-zoom-DGFF8bbX.js";import{b as se,C as he,p as we,d as xe,f as ye,h as Ve,i as De,P as Ee,j as Ce,k as ve,T as Re,l as Ge,A as lt}from"./chart.js-CS2BZAAA.js";import"./chartjs-adapter-date-fns-B1M5gydP.js";import{N as $,a as Ye,b as Ne,c as Oe,d as st,e as ce,f as ct,g as ut,h as ae,i as _t,j as dt,k as ft}from"./naive-ui-BFzYjiQr.js";import{V as mt}from"./vue-mathjax-next-CPDiIMce.js";import"./hammerjs-BKGieZPK.js";import"./@babel-DuvU54pN.js";import"./@kurkle-BZxJdD1U.js";import"./date-fns-99pyhWYT.js";import"./seemly-BFh2AANw.js";import"./vooks-UHRToW5y.js";import"./evtd-CI_DDEu_.js";import"./lodash-es-nRLt9CzG.js";import"./@emotion-WldOFDRm.js";import"./@css-render-5itupMdg.js";import"./css-render-Ct37b3-v.js";import"./vueuc-CQX-IOll.js";import"./vdirs-DL8EOfHr.js";import"./@juggle-C8OzoCMD.js";import"./treemate-HRdUPn5m.js";import"./vue-CMUvV8mj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const ze=(t,e)=>Math.pow(Math.max(0,t),e)-Math.pow(Math.max(0,-t),e),Le=(t,e)=>{let n=e.max-e.min;return(t-e.min)/n*2-1},$e=(t,e)=>{let n=e.max-e.min;return(t+1)*n*.5+e.min};class ge extends se{constructor(n){super(n);Y(this,"start");Y(this,"end");Y(this,"_startValue");Y(this,"_endValue");Y(this,"_valueRange");this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}fTransform(n){let a={min:this.min,max:this.max},r=Le(n,a),i=ze(r,this.options.level),l=$e(i,a);return Math.round(l)}rTransform(n){let a={min:this.min,max:this.max},r=Le(n,a),i=ze(r,1/this.options.level),l=$e(i,a);return Math.round(l)}buildTicks(){return super.buildTicks().map(a=>Object.assign({},a,{value:this.fTransform(a.value)}))}getPixelForValue(n,a){return super.getPixelForValue(this.rTransform(n),a)}getValueForPixel(n){return super.getValueForPixel(this.fTransform(n))}}Y(ge,"id","focus"),Y(ge,"defaults",{level:1});let d;const G=new Array(128).fill(void 0);G.push(void 0,null,!0,!1);let ie=G.length;function u(t){ie===G.length&&G.push(G.length+1);const e=ie;return ie=G[e],G[e]=t,e}function s(t){return G[t]}function bt(t){t<132||(G[t]=ie,ie=t)}function T(t){const e=s(t);return bt(t),e}const qe=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&qe.decode();let re=null;function me(){return(re===null||re.byteLength===0)&&(re=new Uint8Array(d.memory.buffer)),re}function q(t,e){return t=t>>>0,qe.decode(me().subarray(t,t+e))}let X=0;const be=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},pt=typeof be.encodeInto=="function"?function(t,e){return be.encodeInto(t,e)}:function(t,e){const n=be.encode(t);return e.set(n),{read:t.length,written:n.length}};function pe(t,e,n){if(n===void 0){const m=be.encode(t),y=e(m.length,1)>>>0;return me().subarray(y,y+m.length).set(m),X=m.length,y}let a=t.length,r=e(a,1)>>>0;const i=me();let l=0;for(;l<a;l++){const m=t.charCodeAt(l);if(m>127)break;i[r+l]=m}if(l!==a){l!==0&&(t=t.slice(l)),r=n(r,a,a=l+t.length*3,1)>>>0;const m=me().subarray(r+l,r+a),y=pt(t,m);l+=y.written,r=n(r,a,l,1)>>>0}return X=l,r}function gt(t){return t==null}let oe=null;function J(){return(oe===null||oe.byteLength===0)&&(oe=new Int32Array(d.memory.buffer)),oe}function Ie(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const r=t.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=t.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(t)){const r=t.length;let i="[";r>0&&(i+=Ie(t[0]));for(let l=1;l<r;l++)i+=", "+Ie(t[l]);return i+="]",i}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let a;if(n.length>1)a=n[1];else return toString.call(t);if(a=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:a}const Be=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>{d.__wbindgen_export_2.get(t.dtor)(t.a,t.b)});function ht(t,e,n,a){const r={a:t,b:e,cnt:1,dtor:n},i=(...l)=>{r.cnt++;const m=r.a;r.a=0;try{return a(m,r.b,...l)}finally{--r.cnt===0?(d.__wbindgen_export_2.get(r.dtor)(m,r.b),Be.unregister(r)):r.a=m}};return i.original=r,Be.register(i,r,r),i}function wt(t,e,n){d._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1fc7d0969a12ef6f(t,e,u(n))}function xt(t){const e=d.wasm_category_years(t);return T(e)}function je(t,e,n,a){const r=d.wasm_category_invite_data(t,e,n,a);return T(r)}function Ue(t,e,n){const a=d.wasm_category_pool_data(t,e,n);return T(a)}function yt(t){const e=d.wasm_pool_count_data(t);return T(e)}function Ct(t){const e=d.wasm_pool_count_y_max(t);return T(e)}function vt(t){const e=d.wasm_pool_count_x_min(t);return T(e)}function Rt(t){const e=d.wasm_pool_count_x_max(t);return T(e)}function Tt(t,e){const n=d.wasm_pool_rate_data(t,e);return T(n)}function kt(t){const e=d.wasm_pool_rate_x_min(t);return T(e)}function St(t){const e=d.wasm_pool_rate_x_max(t);return T(e)}function Pe(){const t=d.wasm_invite_data();return T(t)}function Ze(){const t=d.wasm_pool_data();return T(t)}function It(t){const e=d.wasm_invite_score_data(t);return T(e)}function ue(t,e){const n=pe(e,d.__wbindgen_malloc,d.__wbindgen_realloc),a=X,r=d.wasm_invite_size_data(t,n,a);return T(r)}function _e(t){const e=d.wasm_invite_x_min(t);return T(e)}function de(t){const e=d.wasm_invite_x_max(t);return T(e)}function A(t,e){try{return t.apply(this,e)}catch(n){d.__wbindgen_exn_store(u(n))}}function Mt(t,e,n,a){d.wasm_bindgen__convert__closures__invoke2_mut__h92b3b5d7258d78e6(t,e,u(n),u(a))}async function Dt(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(a){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",a);else throw a}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function Et(){const t={};return t.wbg={},t.wbg.__wbindgen_number_new=function(e){return u(e)},t.wbg.__wbindgen_object_drop_ref=function(e){T(e)},t.wbg.__wbg_log_b4d777e9ea980a2a=function(e,n){console.log(q(e,n))},t.wbg.__wbindgen_object_clone_ref=function(e){const n=s(e);return u(n)},t.wbg.__wbindgen_string_new=function(e,n){const a=q(e,n);return u(a)},t.wbg.__wbg_fetch_27eb4c0a08a9ca04=function(e){const n=fetch(s(e));return u(n)},t.wbg.__wbindgen_cb_drop=function(e){const n=T(e).original;return n.cnt--==1?(n.a=0,!0):!1},t.wbg.__wbg_queueMicrotask_f61ee94ee663068b=function(e){queueMicrotask(s(e))},t.wbg.__wbg_queueMicrotask_f82fc5d1e8f816ae=function(e){const n=s(e).queueMicrotask;return u(n)},t.wbg.__wbindgen_is_function=function(e){return typeof s(e)=="function"},t.wbg.__wbg_fetch_10edd7d7da150227=function(e,n){const a=s(e).fetch(s(n));return u(a)},t.wbg.__wbg_signal_8fbb4942ce477464=function(e){const n=s(e).signal;return u(n)},t.wbg.__wbg_new_92cc7d259297256c=function(){return A(function(){const e=new AbortController;return u(e)},arguments)},t.wbg.__wbg_abort_510372063dd66b29=function(e){s(e).abort()},t.wbg.__wbg_newwithstrandinit_11fbc38beb4c26b0=function(){return A(function(e,n,a){const r=new Request(q(e,n),s(a));return u(r)},arguments)},t.wbg.__wbindgen_string_get=function(e,n){const a=s(n),r=typeof a=="string"?a:void 0;var i=gt(r)?0:pe(r,d.__wbindgen_malloc,d.__wbindgen_realloc),l=X;J()[e/4+1]=l,J()[e/4+0]=i},t.wbg.__wbg_new_4db22fd5d40c5665=function(){return A(function(){const e=new Headers;return u(e)},arguments)},t.wbg.__wbg_append_b2e8ed692fc5eb6e=function(){return A(function(e,n,a,r,i){s(e).append(q(n,a),q(r,i))},arguments)},t.wbg.__wbg_instanceof_Response_b5451a06784a2404=function(e){let n;try{n=s(e)instanceof Response}catch{n=!1}return n},t.wbg.__wbg_url_e319aee56d26ddf1=function(e,n){const a=s(n).url,r=pe(a,d.__wbindgen_malloc,d.__wbindgen_realloc),i=X;J()[e/4+1]=i,J()[e/4+0]=r},t.wbg.__wbg_status_bea567d1049f0b6a=function(e){return s(e).status},t.wbg.__wbg_headers_96d9457941f08a33=function(e){const n=s(e).headers;return u(n)},t.wbg.__wbg_arrayBuffer_eb2005809be09726=function(){return A(function(e){const n=s(e).arrayBuffer();return u(n)},arguments)},t.wbg.__wbindgen_is_object=function(e){const n=s(e);return typeof n=="object"&&n!==null},t.wbg.__wbindgen_error_new=function(e,n){const a=new Error(q(e,n));return u(a)},t.wbg.__wbindgen_bigint_from_u64=function(e){const n=BigInt.asUintN(64,e);return u(n)},t.wbg.__wbg_set_f975102236d3c502=function(e,n,a){s(e)[T(n)]=T(a)},t.wbg.__wbg_new_75208e29bddfd88c=function(){const e=new Array;return u(e)},t.wbg.__wbg_newnoargs_cfecb3965268594c=function(e,n){const a=new Function(q(e,n));return u(a)},t.wbg.__wbg_next_586204376d2ed373=function(e){const n=s(e).next;return u(n)},t.wbg.__wbg_next_b2d3366343a208b3=function(){return A(function(e){const n=s(e).next();return u(n)},arguments)},t.wbg.__wbg_done_90b14d6f6eacc42f=function(e){return s(e).done},t.wbg.__wbg_value_3158be908c80a75e=function(e){const n=s(e).value;return u(n)},t.wbg.__wbg_iterator_40027cdd598da26b=function(){return u(Symbol.iterator)},t.wbg.__wbg_get_3fddfed2c83f434c=function(){return A(function(e,n){const a=Reflect.get(s(e),s(n));return u(a)},arguments)},t.wbg.__wbg_call_3f093dd26d5569f8=function(){return A(function(e,n){const a=s(e).call(s(n));return u(a)},arguments)},t.wbg.__wbg_new_632630b5cec17f21=function(){const e=new Object;return u(e)},t.wbg.__wbg_self_05040bd9523805b9=function(){return A(function(){const e=self.self;return u(e)},arguments)},t.wbg.__wbg_window_adc720039f2cb14f=function(){return A(function(){const e=window.window;return u(e)},arguments)},t.wbg.__wbg_globalThis_622105db80c1457d=function(){return A(function(){const e=globalThis.globalThis;return u(e)},arguments)},t.wbg.__wbg_global_f56b013ed9bcf359=function(){return A(function(){const e=global.global;return u(e)},arguments)},t.wbg.__wbindgen_is_undefined=function(e){return s(e)===void 0},t.wbg.__wbg_set_79c308ecd9a1d091=function(e,n,a){s(e)[n>>>0]=T(a)},t.wbg.__wbg_call_67f2111acd2dfdb6=function(){return A(function(e,n,a){const r=s(e).call(s(n),s(a));return u(r)},arguments)},t.wbg.__wbg_new_70828a4353259d4b=function(e,n){try{var a={a:e,b:n},r=(l,m)=>{const y=a.a;a.a=0;try{return Mt(y,a.b,l,m)}finally{a.a=y}};const i=new Promise(r);return u(i)}finally{a.a=a.b=0}},t.wbg.__wbg_resolve_5da6faf2c96fd1d5=function(e){const n=Promise.resolve(s(e));return u(n)},t.wbg.__wbg_then_f9e58f5a50f43eae=function(e,n){const a=s(e).then(s(n));return u(a)},t.wbg.__wbg_then_20a5920e447d1cb1=function(e,n,a){const r=s(e).then(s(n),s(a));return u(r)},t.wbg.__wbg_buffer_b914fb8b50ebbc3e=function(e){const n=s(e).buffer;return u(n)},t.wbg.__wbg_newwithbyteoffsetandlength_0de9ee56e9f6ee6e=function(e,n,a){const r=new Uint8Array(s(e),n>>>0,a>>>0);return u(r)},t.wbg.__wbg_new_b1f2d6842d615181=function(e){const n=new Uint8Array(s(e));return u(n)},t.wbg.__wbg_set_7d988c98e6ced92d=function(e,n,a){s(e).set(s(n),a>>>0)},t.wbg.__wbg_length_21c4b0ae73cba59d=function(e){return s(e).length},t.wbg.__wbg_stringify_865daa6fb8c83d5a=function(){return A(function(e){const n=JSON.stringify(s(e));return u(n)},arguments)},t.wbg.__wbg_has_ad45eb020184f624=function(){return A(function(e,n){return Reflect.has(s(e),s(n))},arguments)},t.wbg.__wbg_set_961700853a212a39=function(){return A(function(e,n,a){return Reflect.set(s(e),s(n),s(a))},arguments)},t.wbg.__wbindgen_debug_string=function(e,n){const a=Ie(s(n)),r=pe(a,d.__wbindgen_malloc,d.__wbindgen_realloc),i=X;J()[e/4+1]=i,J()[e/4+0]=r},t.wbg.__wbindgen_throw=function(e,n){throw new Error(q(e,n))},t.wbg.__wbindgen_memory=function(){const e=d.memory;return u(e)},t.wbg.__wbindgen_closure_wrapper545=function(e,n,a){const r=ht(e,n,108,wt);return u(r)},t}function Pt(t,e){return d=t.exports,Te.__wbindgen_wasm_module=e,oe=null,re=null,d}async function Te(t){if(d!==void 0)return d;typeof t>"u"&&(t=new URL("/assets/analyzer_bg-DKx7hobO.wasm",import.meta.url));const e=Et();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:a}=await Dt(await t,e);return Pt(n,a)}const At=ee({__name:"Invitations",async setup(t){let e,n;he.register(we,xe,ye,Ve,De,Ee,Ce,se,ve,Re,ge,Me),[e,n]=O(()=>Te()),await e,n();let a=([e,n]=O(()=>Pe()),e=await e,n(),e),r=B(),i=B(),l=B();const m=function(){return l.value.chart},y=function(){return l.value==r.value?i.value.chart:l.value==i.value?r.value.chart:null};let H=It(a),L=ue(a,"m");const N=function(R,f,h){let E=this.getLabelForValue(R);return" ".repeat(8-E.length)+E},W=R=>{let f=R.chart;if(m()==f){let h=y();h.scales.x.options.min=f.scales.x.options.min,h.scales.x.options.max=f.scales.x.options.max,h.update("none")}},x=R=>{let f=R.chart;if(m()==f){let P=y();P.scales.x.options.min=f.scales.x.options.min,P.scales.x.options.max=f.scales.x.options.max,P.update("none")}let h=i.value.chart,E={min:h.scales.x.min,max:h.scales.x.max},I=(E.max-E.min)/1e3/3600/24;I>2500?L=ue(a,"m"):I>583?L=ue(a,"w"):L=ue(a,"d"),h.data=L,h.update("none")};let k={zoom:{wheel:{enabled:!0},mode:"x",onZoom:x},limits:{x:{min:_e(a),max:de(a)}},pan:{enabled:!0,mode:"x",onPan:W}};const b=function(R){return R.map(f=>H.tooltip.title[0][f.dataIndex])};let w={maintainAspectRatio:!1,scales:{x:{type:"time",min:_e(a),max:de(a)},y:{type:"focus",level:1.5,min:0,max:1e3,grid:{display:!1},ticks:{callback:N}}},plugins:{legend:{position:"right"},zoom:k,tooltip:{callbacks:{title:b}}}};const g=function(R){return R.map(f=>L.tooltip.title[0][f.dataIndex])};let F={maintainAspectRatio:!1,scales:{x:{type:"time",min:([e,n]=O(()=>_e(a)),e=await e,n(),e),max:([e,n]=O(()=>de(a)),e=await e,n(),e)},y:{type:"logarithmic",min:0,grid:{display:!1},ticks:{callback:N}}},plugins:{legend:{position:"right"},zoom:{zoom:{wheel:{enabled:!0},mode:"x",onZoom:x},limits:{x:{min:([e,n]=O(()=>_e(a)),e=await e,n(),e),max:([e,n]=O(()=>de(a)),e=await e,n(),e)}},pan:{enabled:!0,mode:"x",onPan:W}},tooltip:{callbacks:{title:g}}}};return(R,f)=>(z(),le(We,null,[c(o($),{title:"Invitation CRS Score"},{default:_(()=>[D("div",null,[c(o(Q),{ref_key:"scoreChartRef",ref:r,onMouseover:f[0]||(f[0]=h=>j(l)?l.value=o(r):l=o(r)),onMouseleave:f[1]||(f[1]=h=>j(l)?l.value=null:l=null),options:o(w),data:o(H),style:{height:"30vh",width:"100%"}},null,8,["options","data"])])]),_:1}),c(o($),{title:"Invitation Size"},{default:_(()=>[D("div",null,[c(o(ot),{ref_key:"sizeChartRef",ref:i,onMouseover:f[2]||(f[2]=h=>j(l)?l.value=o(i):l=o(i)),onMouseleave:f[3]||(f[3]=h=>j(l)?l.value=null:l=null),options:o(F),data:o(L),style:{height:"30vh",width:"100%"}},null,8,["options","data"])])]),_:1})],64))}}),te=(t,e)=>{const n=t.__vccOpts||t;for(const[a,r]of e)n[a]=r;return n},Ft=te(At,[["__scopeId","data-v-006bf16d"]]),Nt={key:0},Ot={key:1},zt=ee({__name:"Candidates",async setup(t){let e,n;he.register(we,xe,ye,De,Ee,Ce,se,ve,Re,Me,Ge),[e,n]=O(()=>Te()),await e,n();let a=([e,n]=O(()=>Ze()),e=await e,n(),e),r=([e,n]=O(()=>Pe()),e=await e,n(),e);const i=function({focused:x,checked:k}){const b={};return k?(b.background="#e67e22",x&&(b.boxShadow="0 0 0 2px #e67e2240")):(b.background="#3498db",x&&(b.boxShadow="0 0 0 2px #3498db40")),b};let l=B(!1),m=yt(a),y=Tt(a,r),H={maintainAspectRatio:!1,scales:{x:{type:"time"},y:{min:0,reverse:!0}},plugins:{zoom:{zoom:{wheel:{enabled:!0},mode:"xy"},limits:{y:{min:0,max:Ct(a)},x:{min:vt(a),max:Rt(a)}},pan:{enabled:!0,mode:"xy"}},legend:{position:"right"},tooltip:{enabled:!1}}};const L=function(x){return x.map(k=>"Predicted Increase Rate")},N=function(x){return y.tooltip.label[x.datasetIndex][0]};let W={maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"xy",intersect:!1},scales:{x:{type:"time"},y:{reverse:!0}},plugins:{zoom:{zoom:{wheel:{enabled:!0},mode:"x"},limits:{x:{min:kt(a),max:St(a)}},pan:{enabled:!0,mode:"x"}},tooltip:{filter:function(x){return x.datasetIndex<y.tooltip.label.length},callbacks:{title:L,label:N}},legend:{position:"right",labels:{filter:function(x){return x.text!="none"}}}}};return(x,k)=>(z(),V(o($),{title:"Candidates in the Pool"},{"header-extra":_(()=>[c(o(Ye),{round:!1,"rail-style":i,value:o(l),"onUpdate:value":k[0]||(k[0]=b=>j(l)?l.value=b:l=b)},{checked:_(()=>[M(" Increase Rate ")]),unchecked:_(()=>[M(" Total Count ")]),_:1},8,["value"])]),default:_(()=>[o(l)?(z(),le("div",Nt,[c(o(Q),{ref:"rateChartRef",options:o(W),data:o(y),style:{height:"70vh",width:"100%"}},null,8,["options","data"])])):(z(),le("div",Ot,[c(o(Q),{ref:"countChartRef",options:o(H),data:o(m),style:{height:"70vh",width:"100%"}},null,8,["options","data"])]))]),_:1}))}}),Lt=te(zt,[["__scopeId","data-v-cb9c5ca2"]]);var C=(t=>(t.GENERAL="General",t.PNP="Province",t.CEC="Inland",t.FSW="Oversea",t.STEM="STEM",t.HEALTH="Health",t.FRENCH="French",t.TRADE="Trade",t.TRANSPORT="Transport",t.AGRICULTURE="Agriculture",t.UNKNOWN="Unknown",t))(C||{});function He(t){return t=="General"?"#ECF0F1":t=="Province"?"#9B59B6":t=="Inland"?"#E74C3C":t=="Oversea"?"#C0392B":t=="STEM"?"#3498DB":t=="Health"?"#16A085":t=="French"?"#D35400":t=="Trade"?"#7F8C8D":t=="Transport"?"#F39C12":t=="Agriculture"?"#2ECC71":"#000000"}let fe={2015:{min:68e3,max:74e3},2016:{min:54e3,max:59e3},2017:{min:69600,max:77300},2018:{min:72700,max:78200},2019:{min:76e3,max:86e3},2020:{min:88500,max:1e5},2021:{min:81e3,max:110250},2022:{min:52e3,max:64e3},2023:{min:67750,max:88e3},2024:{min:9e4,max:116e3},2025:{min:96500,max:124e3},2026:{min:96500,max:124e3}};async function $t(){const e=await fetch("https://www.canada.ca/content/dam/ircc/documents/json/ee_rounds_123_en.json");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}async function Ke(){const t=await $t();return console.log(t),t.rounds.map(function(e){return{id:parseInt(e.drawNumber.replace(/,/g,"")),crs:parseInt(e.drawCRS.replace(/,/g,"")),size:parseInt(e.drawSize.replace(/,/g,"")),name:Bt(e.drawName),date:new Date(Date.parse(e.drawDateFull)),pool:jt([e.dd1,e.dd2,e.dd4,e.dd5,e.dd6,e.dd7,e.dd8,e.dd10,e.dd11,e.dd12,e.dd13,e.dd14,e.dd15,e.dd16,e.dd17])}})}function Bt(t){return t=="No Program Specified"||t=="General"?C.GENERAL:t=="Provincial Nominee Program"?C.PNP:t=="Canadian Experience Class"?C.CEC:t=="Federal Skilled Worker"?C.FSW:t=="Federal Skilled Trades"?C.TRADE:t=="STEM occupations (2023-1)"?C.STEM:t=="Healthcare occupations (2023-1)"?C.HEALTH:t=="French language proficiency (2023-1)"||t=="French language proficiency (2024-1)"?C.FRENCH:t=="Trade occupations (2023-1)"?C.TRADE:t=="Transport occupations (2023-1)"?C.TRANSPORT:t=="Agriculture and agri-food occupations (2023-1)"?C.AGRICULTURE:C.UNKNOWN}function jt(t){const e=[0,301,351,401,411,421,431,441,451,461,471,481,491,501,601],n=[300,350,400,410,420,430,440,450,460,470,480,490,500,600,1200],a=t.map(r=>parseInt(r.replace(/,/g,"")));return a.reduce((r,i)=>r+i,0)==0?[]:a.map(function(r,i){return{min:e[i],max:n[i],count:r}})}const Ut=252,Ht=ee({__name:"Categories",async setup(t){let e,n;he.register(we,xe,ye,Ge,lt,Ce,se,ve,Re),[e,n]=O(()=>Te()),await e,n();let a=([e,n]=O(()=>Ze()),e=await e,n(),e),r=([e,n]=O(()=>Pe()),e=await e,n(),e),i=xt(r),l=B(),m=B(!0),y=B({label:"all",key:0});function H(){x=je(a,r,y.value.key,m.value);let p=l.value.chart;p.data=x,p.update("none")}let L=B(),N=B({label:"all",key:0});function W(){k=Ue(a,r,N.value.key);let p=L.value.chart;p.data=k,p.update("none")}let x=je(a,r,0,!0),k=Ue(a,r,0),g={maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"xy",intersect:!1},scales:{x:{type:"time"},y:{min:0,max:100,ticks:{callback:function(p){return p+"%"}}}},plugins:{legend:{position:"right"},tooltip:{callbacks:{title:function(p){return p.map(S=>x.tooltip.title[0][S.dataIndex])},label:function(p){return x.tooltip.label[p.datasetIndex][p.dataIndex]}}}}},f={maintainAspectRatio:!1,interaction:{mode:"nearest",axis:"xy",intersect:!1},scales:{x:{type:"time"},y:{min:0,ticks:{callback:function(p){return p+"%"}}}},plugins:{legend:{position:"right"},tooltip:{callbacks:{title:function(p){return p.map(S=>k.tooltip.title[0][S.dataIndex])},label:function(p){return k.tooltip.label[p.datasetIndex][p.dataIndex]}}}}};const h=[C.STEM,C.HEALTH,C.FRENCH,C.AGRICULTURE,C.TRADE,C.TRANSPORT],E=([e,n]=O(()=>Ke()),e=await e,n(),e).filter(p=>p.id>=Ut);function I(){const p=h.concat([C.GENERAL]),S=h.map(Z=>E.filter(Xe=>Xe.name==Z).length),v=E.filter(Z=>!h.includes(Z.name)).length,Se=[{data:S.concat([v]),backgroundColor:p.map(Z=>He(Z)),borderColor:p.map(Z=>He(Z))}];return{data:{labels:p,datasets:Se},options:{responsive:!1,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}}}function P(p,S){return p.filter(v=>v.name==S).sort((v,Se)=>Se.date.getTime()-v.date.getTime())[0]}function K(){const p=h.map(S=>P(E,S)).map(function(S){return{category:S.name,date:S.date.toISOString().substring(0,10)}});return{columns:[{title:"Category",key:"category"},{title:"Date",key:"date",defaultSortOrder:"ascend",sorter:"default"}],data:p}}let ke=I(),Ae=K(),Je=visualViewport.height;return(p,S)=>(z(),V(o(ut),{"x-gap":12,"y-gap":8,cols:2},{default:_(()=>[c(o(ce),null,{default:_(()=>[c(o($),{title:"Invitations By Categories"},{"header-extra":_(()=>[c(o(Ne),{options:o(i),onSelect:S[0]||(S[0]=v=>{j(y)?y.value={label:v==0?"all":v.toString(),key:v}:y={label:v==0?"all":v.toString(),key:v},H()})},{default:_(()=>[c(o(Oe),null,{default:_(()=>[M(Fe(o(y).label),1)]),_:1})]),_:1},8,["options"]),c(o(st),{vertical:""}),c(o(Ye),{round:!1,value:o(m),"onUpdate:value":S[1]||(S[1]=v=>{j(m)?m.value=v:m=v,H()})},{checked:_(()=>[M(" PNP ")]),unchecked:_(()=>[M(" PNP ")]),_:1},8,["value"])]),default:_(()=>[c(o(Q),{ref_key:"inviteChartRef",ref:l,options:o(g),data:o(x),style:{height:"30vh",width:"100%"}},null,8,["options","data"])]),_:1})]),_:1}),c(o(ce),null,{default:_(()=>[c(o($),{title:"Invitation Count By Categories"},{default:_(()=>[c(o(it),{ref:"invitationCountChart",options:o(ke).options,data:o(ke).data,style:{height:"30vh",width:"100%"}},null,8,["options","data"])]),_:1})]),_:1}),c(o(ce),null,{default:_(()=>[c(o($),{title:"Candidates By Categories"},{"header-extra":_(()=>[c(o(Ne),{options:o(i),onSelect:S[2]||(S[2]=v=>{j(N)?N.value={label:v==0?"all":v.toString(),key:v}:N={label:v==0?"all":v.toString(),key:v},W()})},{default:_(()=>[c(o(Oe),null,{default:_(()=>[M(Fe(o(N).label),1)]),_:1})]),_:1},8,["options"])]),default:_(()=>[c(o(Q),{ref_key:"poolChartRef",ref:L,options:o(f),data:o(k),style:{height:"30vh",width:"100%"}},null,8,["options","data"])]),_:1})]),_:1}),c(o(ce),null,{default:_(()=>[c(o($),{title:"Most Recent Draw By Categories"},{default:_(()=>[c(o(ct),{ref:"invitationRecencyTable",columns:o(Ae).columns,data:o(Ae).data,bordered:!1,"max-height":o(Je)*.25,style:{height:"30vh",width:"100%"}},null,8,["columns","data","max-height"])]),_:1})]),_:1})]),_:1}))}}),Wt=te(Ht,[["__scopeId","data-v-c580834f"]]),Vt=ee({__name:"Plan",async setup(t){let e,n;he.register(we,xe,ye,Ve,De,Ee,Ce,se,ve,Re,ge,Me);const a=([e,n]=O(()=>Ke()),e=await e,n(),e).filter(b=>b.name!=C.PNP),r=Math.min(...a.map(b=>b.date.getFullYear())),i=Math.max(...a.map(b=>b.date.getFullYear()))+3;function l(){let b=new Date(r,0).getTime(),w=new Date(i,0).getTime(),g=w-b;return{min:b-g*.02,max:w+g*.02}}const m=l(),y=function(b,w,g){let F=this.getLabelForValue(b);return" ".repeat(8-F.length)+F};function H(){let b=[];for(let g=r;g<i;g++){let F=new Date(g,6).getTime(),R=fe[g].min,f=fe[g].max;var w=null;Date.now()>=new Date(g,0).getTime()&&(w=a.filter(h=>h.date.getFullYear()==g).reduce((h,E)=>h+E.size,0)),b.push({label:F,planMin:R,planMax:f,actual:w})}return b}function L(){let b=[];for(let g=r;g<i;g++){let F=fe[g].min,R=fe[g].max;for(let f=0;f<12;f++){let h=new Date(g,f,15).getTime(),E=F/(12-f),I=R/(12-f);var w=null;Date.now()>=new Date(g,f).getTime()?(w=a.filter(P=>P.date.getFullYear()==g&&P.date.getMonth()==f).reduce((P,K)=>P+K.size,0),R-=w,F-=w):(R-=I,F-=E),R=Math.max(0,R),F=Math.max(0,F),b.push({label:h,planMin:E,planMax:I,actual:w})}}return b}function N(b){const w=b?L():H(),g=w.map(I=>I.label),F={label:"Low Range",data:w.map(I=>I.planMin),cubicInterpolationMode:"monotone",backgroundColor:"#F4D03F",borderColor:"#F4D03F",borderDash:[5,5]},R={label:"Low Range",data:w.map(I=>I.planMax),cubicInterpolationMode:"monotone",backgroundColor:"#F4D03F",borderColor:"#F4D03F",borderDash:[5,5]},f={label:"Invitation",data:w.map(I=>I.actual),cubicInterpolationMode:"monotone",backgroundColor:"#58D68D ",borderColor:"#58D68D "},h=[F,R,f];console.log(w);const E=I=>{let P=I.chart,K={min:P.scales.x.min,max:P.scales.x.max};(K.max-K.min)/1e3/3600/24>2500?P.data=N(!1).data:P.data=N(!0).data,P.update("none")};return{data:{labels:g,datasets:h},options:{responsive:!1,maintainAspectRatio:!1,scales:{x:{type:"time",min:m.min,max:m.max},y:{type:"linear",grid:{display:!1},ticks:{callback:y}}},plugins:{zoom:{zoom:{wheel:{enabled:!0},mode:"x",onZoom:E},limits:{x:{min:m.min,max:m.max}},pan:{enabled:!0,mode:"x"}}}}}}let W=N(!1),x=B(),k=null;return(b,w)=>(z(),V(o($),{title:"IRCC Departmental Plan"},{default:_(()=>[c(o(Q),{ref_key:"planChart",ref:x,onMouseover:w[0]||(w[0]=g=>j(k)?k.value=o(x):k=o(x)),onMouseleave:w[1]||(w[1]=g=>j(k)?k.value=null:k=null),options:o(W).options,data:o(W).data,style:{height:"30vh",width:"100%"}},null,8,["options","data"])]),_:1}))}}),Gt=te(Vt,[["__scopeId","data-v-0bb7368e"]]),Yt={};function qt(t,e){return z(),le("p",null,"SHA: 084ee3cb2b43bd007eb4230ca50b9f8ea412ef20")}const Zt=te(Yt,[["render",qt]]),U=t=>(nt("data-v-2ef8aeac"),t=t(),at(),t),Kt=U(()=>D("h3",null,"Invitation CRS Score",-1)),Jt=U(()=>D("ul",null,[D("li",null," Canada Experience Class (CEC) are renamed as Inland since most of CECs are inland applicants. "),D("li",null," Federal Skill Worker (FSW) are renamed as Oversee since most of FSWs are oversea applicants. "),D("li",null," Federal Skill Trade (FST) and Trade 2023-1 are merged as same category due to their similarity in items of NOC requirement. "),D("li",null," General and No Program Specified are merged because they are the same. "),D("li",null," French 2023-1 and French 2024-1 are merged because they are the same. ")],-1)),Xt=U(()=>D("h3",null,"Invitation Size",-1)),Qt=U(()=>D("h3",null,"Candidates in the Pool",-1)),en=U(()=>D("h3",null,"Invitation Size By Categories",-1)),tn=U(()=>D("h3",null,"Invitation Count By Categories",-1)),nn=U(()=>D("h3",null,"Estimated Candidates By Categories",-1)),an=U(()=>D("h3",null,"Most Recent Draw By Categories",-1)),rn=U(()=>D("h3",null,"IRCC Departmental Plan",-1)),on=U(()=>D("br",null,null,-1)),ln=ee({__name:"Methodology",setup(t){const e=B("$$\\frac{\\text{draw size}}{\\text{pool size with CRS} \\geq \\text{draw CRS}}$$"),n=B("$$\\frac{\\text{yearly planned size} - \\text{already invited size}}{\\text{number of remaining months}}$$");return(a,r)=>{const i=tt("vue-mathjax");return z(),le(We,null,[c(o($),{title:"Introduction"},{default:_(()=>[M(" Since IRCC does not much information about Express Entry, lots of data in this website are estimated or derived from official source. Here are the documentation about how each estimated value are generated. If you find some better estimation method, please let me know by opening a Issue on GitHub repo. ")]),_:1}),c(o($),{title:"Invitations Tab"},{default:_(()=>[Kt,M(" Data is from IRCC directly, with the following modification: "),Jt,Xt,M(" Same as Invitation CRS Score ")]),_:1}),c(o($),{title:"Candidates Tab"},{default:_(()=>[Qt,M(" Data is from IRCC directly, with missing value being skipped. ")]),_:1}),c(o($),{title:"Categories Tab"},{default:_(()=>[en,M(" Data is from IRCC directly, only count draws happens after 252nd rounds (inclusive). "),tn,M(" Same as Invitation Size By Categories. "),nn,M(" This is computed as "),c(i,{formula:e.value},null,8,["formula"]),M(" TODO: This is far from accurate because it does not account for recovery of a particular occupation overtime. "),an,M(" Data is from IRCC directly. ")]),_:1}),c(o($),{title:"IRCC Plan Tab"},{default:_(()=>[rn,M(" For per year data, the data is from IRCC yearly departmental plan directly. "),on,M(" For per month data, it is computed as "),c(i,{formula:n.value},null,8,["formula"])]),_:1})],64)}}}),sn=te(ln,[["__scopeId","data-v-2ef8aeac"]]),cn=ee({__name:"App",setup(t){return(e,n)=>(z(),V(o(ft),{theme:o(dt)},{default:_(()=>[c(o(_t),{type:"line","default-value":"invitations",animated:""},{default:_(()=>[c(o(ae),{name:"invitations",tab:"Invitations"},{default:_(()=>[(z(),V(ne,null,{default:_(()=>[c(Ft)]),_:1}))]),_:1}),c(o(ae),{name:"candidates",tab:"Candidates"},{default:_(()=>[(z(),V(ne,null,{default:_(()=>[c(Lt)]),_:1}))]),_:1}),c(o(ae),{name:"categories",tab:"Categories"},{default:_(()=>[(z(),V(ne,null,{default:_(()=>[c(Wt)]),_:1}))]),_:1}),c(o(ae),{name:"plan",tab:"IRCC Plan"},{default:_(()=>[(z(),V(ne,null,{default:_(()=>[c(Gt)]),_:1}))]),_:1}),c(o(ae),{name:"methodology",tab:"Methodology"},{default:_(()=>[(z(),V(ne,null,{default:_(()=>[c(sn)]),_:1}))]),_:1})]),_:1}),c(Zt)]),_:1},8,["theme"]))}});rt(cn).use(mt).mount("#app");
